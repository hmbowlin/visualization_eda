---
title: "9.26.2019"
output: github_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggridges)
##
##Attaching package: 'ggridges'
## The following object is masked from 'package:ggplot2':
##
##    scale_discrete_manual
```

# Weather Data
```{r}
weather_df = 
  rnoaa::meteo_pull_monitors(c("USW00094728", "USC00519397", "USS0023B17S"),
                      var = c("PRCP", "TMIN", "TMAX"), 
                      date_min = "2017-01-01",
                      date_max = "2017-12-31") %>%
  mutate(
    name = recode(id, USW00094728 = "CentralPark_NY", 
                      USC00519397 = "Waikiki_HA",
                      USS0023B17S = "Waterhole_WA"),
    tmin = tmin / 10,
    tmax = tmax / 10) %>%
  select(name, id, everything())
weather_df
##
## Create a ggplot, aes= aesthetic mapping we care about, without geompoint() we don't have anything on our graph
## geompoint() at a point at each x/y variable we will put a point
##
ggplot(weather_df, aes(x = tmin, y = tmax)) + 
  geom_point()
##
## 
```
# Different aesthetic mapping
```{r}
weather_df %>%
  ggplot(aes(x = tmin, y = tmax)) +
  geom_point()
##
## Another way of making above ggplot

```

## Filtering by specific variable name
```{r}
weather_df %>% filter(name == "Central_Park_NY")
```

# saving plot with a name (plot_weather)
```{r}
plot_weather = 
  weather_df %>%
  ggplot(aes(x = tmin, y = tmax))

plot_weather + geom_point()
```

Adding color... 

```{r}
ggplot(weather_df, aes(x = tmin, y = tmax)) + 
  geom_point(aes(color = name), alpha = 0.4)
##
## Adding color into the different points, each color represents a different name (weather station location)
## Alpha = 0.4 adds transparency to data points
```

## Adding line through the data (smooth, curvy best line), se= FALSE turns error bars off
* First
```{r}
ggplot(weather_df, aes(x = tmin, y = tmax)) + 
  geom_point(aes(color = name), alpha = .5) +
  geom_smooth(se = FALSE)
```
* vs, not defining all aesthetic mappings for everything (all three variables), color matters in geom_point but not in geom_smooth
```{r}
ggplot(weather_df, aes(x = tmin, y = tmax, color = name)) + 
  geom_point(alpha = .5) +
  geom_smooth(se = FALSE)
##
## Gives you smooth lines for each variable (one for each location of weather temps)
```

## Want to turn one panel plot into three panel plot, one plot for each weather station
```{r}
ggplot(weather_df, aes(x = tmin, y = tmax, color = name)) + 
  geom_point(alpha = .5) +
  geom_smooth(se = FALSE) + 
  facet_grid(. ~ name)
##
## Facets break out your plot by the variable you specify (here, you break out by name)
## Easier to see what's going on in each different weather station, helpful to show individual variables
```

## the points are sized based on how much precipitation happens on that date, temperature based on day of the year (so big curves in WA and NY because seasons, Waikiki is fairly similar temp all year round)
```{r}
ggplot(weather_df, aes(x = date, y = tmax, color = name)) + 
  geom_point(aes(size = prcp), alpha = .5) +
  geom_smooth(se = FALSE) + 
  facet_grid(. ~ name)
##
## Color= name so color by different weather stations
## and break out by facet to show each variable, can do all together to compare on top of each other
##
```
# shows precipitation based on day, not as good as above
```{r}
ggplot(weather_df, aes(x = date, y = prcp, color = name)) + 
  geom_point( alpha = .5) +
  geom_smooth(se = FALSE) 
```
```{r}
weather_df %>% 
  filter(name == "CentralPark_NY") %>% 
  mutate(tmax_fahr = tmax * (9 / 5) + 32,
         tmin_fahr = tmin * (9 / 5) + 32) %>% 
  ggplot(aes(x = tmin_fahr, y = tmax_fahr)) +
  geom_point(alpha = .5) + 
  geom_smooth(method = "lm", se = FALSE)
## Only central park, converting to celsius
```

